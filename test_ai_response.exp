#!/usr/bin/expect -f
set timeout 120
log_user 1

spawn ./target/debug/ocli

expect "You: "
send "List files in src directory\r"

# Wait for AI response
expect {
    timeout { 
        send_user "\n❌ AI timed out\n"
        send "exit\r"
    }
    "tool_call" {
        send_user "\n✅ AI used tool_call!\n"
        expect "You: "
        send "exit\r"
    }
    "You: " {
        send_user "\n⚠️ AI responded without using tools\n"
        send "exit\r"
    }
}

expect eof
