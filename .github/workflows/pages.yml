name: Deploy Docs

on:
  push:
    branches: [master, main]

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Pages
      uses: actions/configure-pages@v3
    
    - name: Build docs
      run: |
        mkdir -p docs
        cp README.md docs/index.md
        cp CHANGELOG.md docs/
        cp QA_TOOLS.md docs/
        cp CONTRIBUTING.md docs/
        
        # Create index.html
        cat > docs/index.html << "HTML"
        <!DOCTYPE html>
        <html>
        <head>
            <title>OCLI - Ollama CLI</title>
            <meta charset="utf-8">
            <style>
                body { 
                    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                    max-width: 900px;
                    margin: 40px auto;
                    padding: 0 20px;
                    line-height: 1.6;
                    color: #333;
                }
                h1 { color: #FF9900; }
                h2 { color: #CC99FF; border-bottom: 2px solid #99CCFF; }
                code { 
                    background: #f4f4f4;
                    padding: 2px 6px;
                    border-radius: 3px;
                }
                pre {
                    background: #1e1e1e;
                    color: #d4d4d4;
                    padding: 15px;
                    border-radius: 5px;
                    overflow-x: auto;
                }
                a { color: #99CCFF; text-decoration: none; }
                a:hover { text-decoration: underline; }
                .nav {
                    background: #FF9900;
                    padding: 15px;
                    border-radius: 5px;
                    margin-bottom: 30px;
                }
                .nav a {
                    color: white;
                    margin-right: 20px;
                    font-weight: bold;
                }
            </style>
        </head>
        <body>
            <div class="nav">
                <a href="#about">About</a>
                <a href="index.md">README</a>
                <a href="CHANGELOG.md">Changelog</a>
                <a href="QA_TOOLS.md">QA Tools</a>
                <a href="CONTRIBUTING.md">Contributing</a>
                <a href="https://github.com/yourusername/ollama-ocli">GitHub</a>
            </div>
            
            <h1 id="about">ü¶â OCLI - Ollama Command Line Interface</h1>
            
            <p>A Claude Code-like AI coding assistant with self-improvement capabilities, LCARS Star Trek styling, and full terminal UI control.</p>
            
            <h2>‚ú® Features</h2>
            <ul>
                <li>ü§ñ AI-powered development with autonomous tool calling</li>
                <li>üìã Planning mode with step-by-step execution</li>
                <li>üé® LCARS Star Trek interface styling</li>
                <li>üîå MCP (Model Context Protocol) support</li>
                <li>üìä Real-time monitoring with /monitor command</li>
                <li>‚öôÔ∏è Configuration management</li>
                <li>üîß Self-improvement capability</li>
            </ul>
            
            <h2>üöÄ Quick Start</h2>
            <pre><code># Install from source
git clone https://github.com/yourusername/ollama-ocli.git
cd ollama-ocli
cargo build --release
./target/release/ocli

# Or via Homebrew
brew tap yourusername/ocli
brew install ocli</code></pre>
            
            <h2>üìö Documentation</h2>
            <ul>
                <li><a href="index.md">Full README</a></li>
                <li><a href="CHANGELOG.md">Changelog</a></li>
                <li><a href="QA_TOOLS.md">QA Tools Guide</a></li>
                <li><a href="CONTRIBUTING.md">Contributing Guide</a></li>
            </ul>
            
            <h2>üéØ Use Cases</h2>
            <h3>Self-Improvement</h3>
            <pre><code>You: add a /version command to show OCLI version
AI: *reads src/main.rs, adds version command, rebuilds*</code></pre>
            
            <h3>Project Scaffolding</h3>
            <pre><code>You: /plan create a REST API with user authentication
You: /next</code></pre>
            
            <h2>üìä Stats</h2>
            <ul>
                <li>Version: 0.2.0</li>
                <li>Lines of Code: 2,112</li>
                <li>Source Modules: 15</li>
                <li>Binary Size: 5.6M</li>
            </ul>
            
            <footer style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
                <p>Made with ü¶â by the OCLI community | <a href="https://github.com/yourusername/ollama-ocli">GitHub</a></p>
            </footer>
        </body>
        </html>
        HTML
    
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v2
      with:
        path: docs
    
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v2
